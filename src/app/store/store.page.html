<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <div class="dFlexRow deliverySection">
            <div class="flex">
                <ion-label class="locationAddress">Southern Spices</ion-label>
                <ion-icon name="create" mode="md" (click)="addLocation()" class="create_icon"></ion-icon>
            </div>
        </div>

        <ion-button slot="end" mode="ios" class="pRelative" (click)="onchatroom()">
            <ion-icon name="chatboxes"></ion-icon>
        </ion-button>
        <ion-button slot="end" mode="ios" class="pRelative" (click)="cartPage()">
            <ion-icon slot="icon-only" name="cart"></ion-icon>
            <span class="cartQuantity">{{cart.productQty}}</span> 
        </ion-button>
    </ion-toolbar>
    <ion-toolbar color="primary">
        <ion-searchbar color="light" md="ios" (click)="searchPage()"></ion-searchbar>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-item *ngIf="!storeProductsList || storeProductsList.length === 0">
        <p>You do not have any products added to your store. Start adding new products or
            add it from the marketplace and modify them.</p>
    </ion-item>
    <ion-list class="list1">
        <ion-list-header>
            <span calss="flt-lt">Available Products</span>
            <!-- <span class="flt-rt link">
                Add from Marketplace
                <ion-icon name="arrow-forward"></ion-icon>
            </span> -->
        </ion-list-header>
        <ion-item *ngFor="let product of storeProductsList">
            <ion-thumbnail slot="start">
                <img [src]="product.images[0]">
            </ion-thumbnail>
            <ion-label>
                <h2><strong>{{ product.name }}</strong></h2>
                <p>Category: {{ product.categories? product.categories : '--' }}</p>
                <p>Price: {{ product.regularPrice }}</p>
            </ion-label>
            <!-- <ion-icon class="round-icon-btn" slot="end" name="add" (click)="addToCart(product)"></ion-icon> -->
            <div class="addBtnSection">
                <ion-button expand="full" color="danger" class="addBtn"  *ngIf="product.units === 0"
                  (click)="addToCart(product)">Add
                </ion-button>
      
                <ion-segment *ngIf="product.units > 0" mode="md">
                  <ion-segment-button mode="md" ion-no-padding color="undefined" (click)="updateCart(product.id,'remove', product)"
                    class="segmentBtn">
                    <div  class="button_div">
                      <ion-icon name="remove" class="all_icons"></ion-icon>
                      </div>
                  </ion-segment-button>
                  <ion-text ion-padding-horizontal class="textUnits">{{product.units}}</ion-text>
                  <ion-segment-button mode="md" ion-no-padding color="undefined" (click)="updateCart(product.id,'add', product)"
                    class="segmentBtn">
                    <div class="button_div">
                      <ion-icon name="add"  class="all_icons"></ion-icon>
                      </div>
                  </ion-segment-button>
                </ion-segment>
              </div>
        </ion-item>
    </ion-list>
</ion-content>
